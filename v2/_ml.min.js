"use strict";var ImageLoader=function(e){this.url=e,this.image=null,this.loadevent=null,this.load=function(){this.image=document.createElement("img");var e=this.url,t=this.image,i=this.loadevent;t.addEventListener("load",function(){i(e,t)}),t.addEventListener("error",function(){MiniLightbox.close(),window.alert("Error loading image: "+e)}),this.image.src=this.url}},MiniLightbox={guid:"mlbx_"+String(Math.random().toFixed(6)).substring(2),modal:{},create:function(){var e=document.createElement("div");e.id=this.guid,e.className="mlbx",e.addEventListener("click",function(){MiniLightbox.close()});var t=document.createElement("figure");t.className="mlbx_fig";var i=document.createElement("img");i.className="mlbx_img";var n=document.createElement("figcaption");n.className="mlbx_txt";var l=document.createElement("div");l.className="mlbx_cls",l.addEventListener("click",function(){MiniLightbox.close()}),this.modal={mlbx:e,mlbx_fig:t,mlbx_img:i,mlbx_txt:n,mlbx_cls:l},e.appendChild(t),t.appendChild(i),t.appendChild(n),t.appendChild(l),document.body.appendChild(e)},open:function(e,t){this.modal.mlbx.classList.add("loading");var i=this,n=new ImageLoader(e);n.loadevent=function(n,l){i.modal.mlbx.classList.remove("loading"),i.modal.mlbx_img.src=e,i.modal.mlbx_txt.innerHTML=t,i.modal.mlbx_fig.style.marginLeft="-".concat(Math.round(l.width/2),"px"),i.modal.mlbx_fig.style.marginTop="-".concat(Math.round(l.height/2),"px"),i.modal.mlbx.classList.add("loaded")},n.load()},close:function(){this.modal.mlbx.classList.remove("loaded"),this.modal.mlbx.classList.remove("loading")},init:function(){this.create(),[].forEach.call(document.querySelectorAll('[rel="mini-lightbox"]'),function(e){e.addEventListener("click",function(e){e.preventDefault(),MiniLightbox.open(this.href,this.title)})})}};document.addEventListener("DOMContentLoaded",function(){MiniLightbox.init()});
